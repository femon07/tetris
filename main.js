(()=>{var t={397:t=>{function e(){const t=document.getElementById("game");if(!t)return;let e;t.width=200,t.height=400;try{e=t.getContext("2d")}catch(t){return}if(!e)return;const n=["#000","#0ff","#f0f","#0f0","#ff0","#f00","#00f","#ffa500"],r=[[[1,1,1,1]],[[2,2],[2,2]],[[0,3,0],[3,3,3]],[[0,4,4],[4,4,0]],[[5,5,0],[0,5,5]],[[6,0,0],[6,6,6]],[[0,0,7],[7,7,7]]],o=Array.from({length:20},(()=>Array(10).fill(0)));let f=c(),i=0,a=0;function c(){const t=r[Math.random()*r.length|0];return{matrix:t,pos:{x:5|0-t[0].length/2,y:0}}}function u(t,r){t.forEach(((t,o)=>{t.forEach(((t,f)=>{t&&(e.fillStyle=n[t],e.fillRect(20*(f+r.x),20*(o+r.y),19,19))}))}))}function l(){e.fillStyle="#000",e.fillRect(0,0,t.width,t.height),u(o,{x:0,y:0}),u(f.matrix,f.pos)}function s(t,e){for(let n=0;n<e.matrix.length;++n)for(let r=0;r<e.matrix[n].length;++r)if(e.matrix[n][r]&&0!==(t[n+e.pos.y]&&t[n+e.pos.y][r+e.pos.x]))return!0;return!1}function x(){f=c(),s(o,f)&&o.forEach((t=>t.fill(0)))}function h(t,e){for(let e=0;e<t.length;++e)for(let n=0;n<e;++n)[t[n][e],t[e][n]]=[t[e][n],t[n][e]];e>0?t.forEach((t=>t.reverse())):t.reverse()}function p(t){f.pos.x+=t,s(o,f)&&(f.pos.x-=t)}function m(){f.pos.y++,s(o,f)&&(f.pos.y--,function(t,e){e.matrix.forEach(((n,r)=>{n.forEach(((n,o)=>{n&&(t[r+e.pos.y][o+e.pos.x]=n)}))}))}(o,f),x()),i=0}document.addEventListener("keydown",(t=>{"ArrowLeft"===t.key?p(-1):"ArrowRight"===t.key?p(1):"ArrowDown"===t.key?m():"ArrowUp"===t.key&&function(){const t=f.pos.x;let e=1;for(h(f.matrix,1);s(o,f);)if(f.pos.x+=e,e=-(e+(e>0?1:-1)),e>f.matrix[0].length)return h(f.matrix,-1),void(f.pos.x=t)}()})),x(),"function"==typeof requestAnimationFrame?function t(e=0){const n=e-a;a=e,i+=n,i>1e3&&m(),l(),"function"==typeof requestAnimationFrame&&requestAnimationFrame(t)}():l()}"undefined"!=typeof window&&window.addEventListener("DOMContentLoaded",e),t.exports={calculateScore:function(t,e=0){return e+({1:40,2:100,3:300,4:1200}[t]||0)},calculateLevel:function(t,e=10){return Math.floor(t/e)+1},initGame:e}}},e={};!function n(r){var o=e[r];if(void 0!==o)return o.exports;var f=e[r]={exports:{}};return t[r](f,f.exports,n),f.exports}(397)})();